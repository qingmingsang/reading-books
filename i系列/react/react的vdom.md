virtual dom
1. 只要数据发生改变，就会重新生成一个完整的Virtual DOM。
2. 重新计算比较出新的和之前的Virtual DOM的差异。
3. 更新真实DOM中真正发生改变的部分，就像是给DOM打了个补丁。

React弱于初始化渲染,强于管理页面的更新,在页面有复杂变动时,是比改变原生dom快的.

Batching 或者 Diff, 说到底，都是为了尽量减少对慢速DOM的调用。

数据模型的每一次改变都会触发Virtual DOM的重新生成，这就是React和其他框架的不同之处。
其他框架会检测文档的变化，只更新必要的部分。
Virtual DOM通常占用更少的内存，因为它不需要在内存中常驻观察者。
但是，每次改动发生后都比较两个完整的Virtual DOM是低效的。复杂的UI对于CPU的要求也很高。
鉴于这个原因，React开发者要主动决定需要渲染的内容。
如果你知道某个行为不会影响对应的组件，你应当告知React不要去分析组件的变动--这可以节省大量的资源，显著地提升应用的性能。

- 初始渲染：Virtual DOM > 脏检查 >= 依赖收集
- 小量数据更新：依赖收集 >> Virtual DOM + 优化 > 脏检查（无法优化） > Virtual DOM 无优化
- 大量数据更新：脏检查 + 优化 >= 依赖收集 + 优化 > Virtual DOM（无法/无需优化）>> MVVM 无优化